<script>
    $(document).ready(function() {
        $('#solve-form').submit(function(event) {
            event.preventDefault(); // Prevent default form submission

            const userInput = $('#input').val();

            // Check if input is valid
            if (!userInput) {
                $('#response').text('Please enter valid input.');
                return;
            }

            // Debugging: Log the data being sent
            console.log("Sending data to Flask: ", userInput);

            // Send the input to the Flask backend
            $.ajax({
                type: 'POST',
                url: '/solve',
                contentType: 'application/json',
                data: JSON.stringify({ input: userInput }),
                success: function(response) {
                    console.log("Response received from Flask: ", response);
                    if (response && response.response) {
                        $('#response').text(response.response); // Display response
                    } else {
                        $('#response').text('Unexpected response format.');
                    }
                },
                error: function(xhr, status, error) {
                    console.error("Error occurred: ", xhr, status, error);
                    if (xhr.responseJSON && xhr.responseJSON.error) {
                        $('#response').text('Error: ' + xhr.responseJSON.error); // Display error message
                    } else {
                        $('#response').text('An error occurred.'); // Generic error message
                    }
                }
            });
        });
    });
</script>
